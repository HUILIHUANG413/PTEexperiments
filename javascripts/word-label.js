data = [
  { "source": "data", "target": "card", "weight": 1 },
  { "source": "data", "target": "lists", "weight": 3 },
  { "source": "data", "target": "topic", "weight": 3 },
  { "source": "data", "target": "recycling", "weight": 1 },
  { "source": "data", "target": "external", "weight": 3 },
  { "source": "data", "target": "mappings", "weight": 7 },
  { "source": "data", "target": "routes", "weight": 1 },
  { "source": "data", "target": "subnetworks", "weight": 1 },
  { "source": "data", "target": "utilizing", "weight": 5 },
  { "source": "data", "target": "texts", "weight": 1 },
  { "source": "data", "target": "surface", "weight": 3 },
  { "source": "data", "target": "urban", "weight": 3 },
  { "source": "data", "target": "handwriting", "weight": 1 },
  { "source": "data", "target": "faciltity", "weight": 1 },
  { "source": "data", "target": "specifying", "weight": 2 },
  { "source": "data", "target": "developing", "weight": 5 },
  { "source": "data", "target": "sketching", "weight": 3 },
  { "source": "data", "target": "unaggregated", "weight": 1 },
  { "source": "data", "target": "subpopulation", "weight": 1 },
  { "source": "data", "target": "closure", "weight": 1 },
  { "source": "data", "target": "subsequence", "weight": 1 },
  { "source": "data", "target": "searching", "weight": 5 },
  { "source": "data", "target": "warping", "weight": 1 },
  { "source": "data", "target": "quantitative", "weight": 2 },
  { "source": "data", "target": "restricted", "weight": 1 },
  { "source": "data", "target": "light", "weight": 4 },
  { "source": "data", "target": "dsp", "weight": 1 },
  { "source": "data", "target": "special", "weight": 1 },
  { "source": "data", "target": "express", "weight": 1 },
  { "source": "data", "target": "ontological", "weight": 1 },
  { "source": "data", "target": "lines", "weight": 1 },
  { "source": "data", "target": "controllers", "weight": 1 },
  { "source": "data", "target": "bursty", "weight": 4 },
  { "source": "data", "target": "sample", "weight": 4 },
  { "source": "data", "target": "manifold", "weight": 2 },
  { "source": "data", "target": "perspective", "weight": 9 },
  { "source": "data", "target": "during", "weight": 3 },
  { "source": "world", "target": "tracking", "weight": 3 },
  { "source": "world", "target": "continuous", "weight": 2 },
  { "source": "world", "target": "learning", "weight": 5 },
  { "source": "world", "target": "interactive", "weight": 1 },
  { "source": "world", "target": "system", "weight": 2 },
  { "source": "world", "target": "programming", "weight": 1 },
  { "source": "world", "target": "language", "weight": 3 },
  { "source": "world", "target": "for", "weight": 30 },
  { "source": "world", "target": "modular", "weight": 1 },
  { "source": "world", "target": "router", "weight": 1 },
  { "source": "world", "target": "efficient", "weight": 2 },
  { "source": "world", "target": "algorithms", "weight": 2 },
  { "source": "world", "target": "business", "weight": 1 },
  { "source": "world", "target": "entropy", "weight": 1 },
  { "source": "world", "target": "word", "weight": 1 },
  { "source": "world", "target": "sense", "weight": 1 },
  { "source": "world", "target": "action", "weight": 1 },
  { "source": "world", "target": "imperfect", "weight": 1 },
  { "source": "world", "target": "international", "weight": 5 },
  { "source": "world", "target": "exploration", "weight": 1 },
  { "source": "world", "target": "indexing", "weight": 1 },
  { "source": "world", "target": "golog", "weight": 1 },
  { "source": "world", "target": "corba", "weight": 1 },
  { "source": "world", "target": "uniform", "weight": 3 },
  { "source": "world", "target": "estimating", "weight": 1 },
  { "source": "world", "target": "no", "weight": 1 },
  { "source": "world", "target": "one", "weight": 1 },
  { "source": "world", "target": "small", "weight": 15 },
  { "source": "world", "target": "lower", "weight": 1 },
  { "source": "world", "target": "car", "weight": 1 },
  { "source": "world", "target": "complicated", "weight": 1 },
  { "source": "world", "target": "java", "weight": 1 },
  { "source": "world", "target": "risk", "weight": 1 },
  { "source": "world", "target": "sublinear", "weight": 1 },
  { "source": "world", "target": "study", "weight": 2 },
  { "source": "world", "target": "controlling", "weight": 1 },
  { "source": "world", "target": "weighted", "weight": 1 },
  { "source": "world", "target": "interaction", "weight": 2 },
  { "source": "world", "target": "file", "weight": 1 },
  { "source": "world", "target": "results", "weight": 3 },
  { "source": "world", "target": "points", "weight": 1 },
  { "source": "world", "target": "other", "weight": 1 },
  { "source": "world", "target": "disambiguation", "weight": 1 },
  { "source": "world", "target": "robot", "weight": 4 },
  { "source": "world", "target": "event", "weight": 1 },
  { "source": "world", "target": "networking", "weight": 1 },
  { "source": "world", "target": "query", "weight": 1 },
  { "source": "world", "target": "wide", "weight": 33 },
  { "source": "world", "target": "streaming", "weight": 1 },
  { "source": "world", "target": "three", "weight": 1 },
  { "source": "world", "target": "science", "weight": 1 },
  { "source": "world", "target": "road", "weight": 1 },
  { "source": "world", "target": "reuse", "weight": 1 },
  { "source": "world", "target": "universal", "weight": 1 },
  { "source": "world", "target": "link", "weight": 1 },
  { "source": "world", "target": "reconstruction", "weight": 2 },
  { "source": "world", "target": "condition", "weight": 1 },
  { "source": "world", "target": "temporal", "weight": 1 },
  { "source": "world", "target": "aspects", "weight": 1 },
  { "source": "world", "target": "association", "weight": 1 },
  { "source": "world", "target": "querying", "weight": 1 },
  { "source": "world", "target": "robotic", "weight": 1 },
  { "source": "world", "target": "examples", "weight": 1 },
  { "source": "world", "target": "self", "weight": 2 },
  { "source": "world", "target": "rings", "weight": 2 },
  { "source": "world", "target": "vision", "weight": 1 },
  { "source": "world", "target": "spoken", "weight": 1 },
  { "source": "world", "target": "concurrency", "weight": 1 },
  { "source": "world", "target": "where", "weight": 1 },
  { "source": "entropy", "target": "training", "weight": 2 },
  { "source": "entropy", "target": "analysis", "weight": 1 },
  { "source": "entropy", "target": "problems", "weight": 2 },
  { "source": "entropy", "target": "optimal", "weight": 3 },
  { "source": "entropy", "target": "hull", "weight": 1 },
  { "source": "entropy", "target": "simple", "weight": 1 },
  { "source": "entropy", "target": "log", "weight": 1 }
];

    var nodes = {};

    var maxWeight = 0;

    data.forEach(function(d) {
        d.source = nodes[d.source] || (nodes[d.source] = {name: d.source});
        d.target = nodes[d.target] || (nodes[d.target] = {name: d.target});
        if (d.weight > maxWeight) {
            maxWeight = d.weight;
        }
    });

    var widthScale = d3.scaleLinear().domain(1, maxWeight).range([1, 5]);
    var width = window.innerWidth * 4 / 5,
        height = window.innerHeight * 4 / 4;

    var force = d3.forceSimulation()
                  .nodes(d3.values(nodes))
                  .force("link", d3.forceLink(data).distance(150))
                  .force('center', d3.forceCenter(width / 2, height / 2))
                  .force("x", d3.forceX())
                  .force("y", d3.forceY())
                  .force("charge", d3.forceManyBody().strength(-100))
                  .alphaTarget(1)
                  .on("tick", tick);

    var svg = d3.select("#word-label").append("svg")
                .attr("width", width)
                .attr("height", height);

    var path = svg.append("g")
                 .selectAll("path")
                 .data(data)
                 .enter()
                 .append("path")
                 .attr("stroke", "black")
                 .attr("stroke-width", function(d) { return widthScale(d.weight)})
                 .attr("fill", "none");

    var node = svg.selectAll(".node")
     .data(force.nodes())
     .enter().append("g")
     .attr("class", "node")
     .call(d3.drag()
     .on("start", dragstarted)
     .on("drag", dragged)
     .on("end", dragended)
    );

    node.append("circle")
     .attr("r", 13)
     .attr("fill", "white");

    node.append("text")
     .style("text-anchor", "middle")
     .text(function(item, index, array) {return item.name})
     .attr("fill", "black")  //TODO: Change the label color
     .attr("font-size", 10)
     .attr("font-family", "sans-serif");

    function tick() {
     path.attr("d", function(d) {
         var dx = d.target.x - d.source.x,
             dy = d.target.y - d.source.y;
         return "M" + d.source.x + " " + d.source.y + " " + "L" + d.target.x + " " + d.target.y;
     });

     node.attr("transform", function(d) {
     return "translate(" + d.x + "," + d.y + ")"; })
    };

    function dragstarted(d) {
     if (!d3.event.active) force.alphaTarget(0.3).restart();
     d.fx = d.x;
     d.fy = d.y;
    };

    function dragged(d) {
     d.fx = d3.event.x;
     d.fy = d3.event.y;
    };

    function dragended(d) {
     if (!d3.event.active) force.alphaTarget(0);
     if (d.fixed == true) { d.fx = d.x; d.fy = d.y; }
     else { d.fx = null; d.fy = null; }
    };